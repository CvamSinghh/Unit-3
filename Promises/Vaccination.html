<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

  <style>
      h4{
          color: teal;
      }
      #container{
          width:30%;
          height: 300px;
          margin: 50px auto;
          border: 2px solid black;
          padding-left: 50px;

      }
  </style>

<body>
    <div id="container">
    <h2>Vaccination Center</h2>
    <h3></h3>
    <h4></h4>
    <h4></h4>

    <form onsubmit="register(event)" action="">
        <input id="inp" type="text" placeholder="Name">
        <input id="age" type="number" placeholder="Age">
        <input type="submit" value="clickme">
    </form>

</div>

</body>

</html>

<script>

    let queue = ["Messi", "Ronaldo", "Utkarsh", "Shinchan"];


    var count = 100 ;

    //-----------step-1 register---------------//
    function register(event) {
        event.preventDefault();
        var name = document.getElementById("inp").value;
        var age = document.getElementById("age").value;
        if (age > 60 )
        {queue.unshift(name)}
        else {queue.push(name)}

        console.log(queue);

        let msg = `${name} your registration is successful`;

        window.alert(msg);

        let mypromise = new Promise(function (resolve,reject) {

            // keep on checking after certain amount of time , if promise is fulfilled
           let interval = setInterval(function () {
                if (queue[0] === name) {
                    resolve(`${name} its your turn now`);
                    clearInterval(interval);
                }

            }, 1000)

        });



        mypromise.then(function (res) {
            alert(res);

        })

        mypromise.catch(function (rej) {

        })


    }

    //--------------------------------------------//
    function startVaccination() {
        count--;
        queue.shift()
        if (count === 0 ) { alert("Vaccine out of stock visit tomorrow")}

        document.getElementsByTagName("h4")[0].textContent = `People = ${queue}`;
        document.getElementsByTagName("h4")[1].textContent = `Number of People = ${queue.length}`;    
        document.getElementsByTagName("h3")[0].textContent = `Vaccine Available = ${count}`;
      
         if (queue.length === 0) { clearInterval(interval) } ;
        console.log("queue", queue)
    }

 
  

    let interval = setInterval(startVaccination, 3000);

    
        
     
</script>